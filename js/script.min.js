const parallaxScrollUp=document.querySelectorAll(".parallax-scroll-up"),headingPrimary=document.querySelector(".heading-primary"),weatherPrimary=document.querySelector(".weather__primary"),weatherSecondary=document.querySelector(".weather__secondary"),header=document.querySelector(".header"),headerShadow=document.querySelector(".header__shadow"),popUp=document.querySelector(".pop-up"),popUpValue=document.querySelector(".pop-up__value"),popUpUnits=document.querySelector(".pop-up__units"),gprsButton=document.querySelector(".gprs__icon"),searchInput=document.querySelector(".search-bar__input"),searchButton=document.querySelector(".search-bar__icon"),timeZoneDOM=document.querySelector(".location__time-zone"),areaDOM=document.querySelector(".location__area"),countryDOM=document.querySelector(".location__country"),icon=document.querySelector(".location__icon"),temperatureContainerDOM=document.querySelector(".temperature"),temperatureDOM=document.querySelector(".temperature__value"),degreeDOM=document.querySelector(".temperature__degree"),unitsDOM=document.querySelector(".temperature__units"),descriptionDOM=document.querySelector(".temperature__description"),precipitation1DOM=document.querySelector(".card__content-value--precipitation-1"),precipitation2DOM=document.querySelector(".card__content-value--precipitation-2"),wind1DOM=document.querySelector(".card__content-value--wind-1"),wind2DOM=document.querySelector(".card__content-value--wind-2"),windSecondary1DOM=document.querySelector(".card__content-secondary-value--wind-1"),windSecondary2DOM=document.querySelector(".card__content-secondary-value--wind-2"),pressure1DOM=document.querySelector(".card__content-value--pressure-1"),pressure2DOM=document.querySelector(".card__content-value--pressure-2"),humidityDOM=document.querySelector(".card__content-value--humidity"),cloudDOM=document.querySelector(".card__content-value--cloud"),uvDOM=document.querySelector(".card__content-value--uv"),footerShadow=document.querySelector(".footer__shadow"),headerOverlayColors=["header--black","header--blue","header--pink","header--green","header--orange","header--red"];let temperatureFahrenheit,temperatureCelsius,temperatureFeelsLikeFahrenheit,temperatureFeelsLikeCelsius,errorGlobal=!1;document.addEventListener("scroll",()=>{const e=window.scrollY;parallaxScrollUp.forEach(t=>{const n=t.getAttribute("data-speed");t.style.transform=`translateY(${Math.trunc(e*n)}px)`});const t=headingPrimary.getAttribute("data-speed");headingPrimary.style.transform=`translate(-50%, calc(-50% + ${Math.trunc(e*t)}px))`,headingPrimary.style.opacity=""});const loadingUI=()=>{icon.src="./assets/images/clock.gif",timeZoneDOM.textContent="",areaDOM.textContent="",countryDOM.textContent="",temperatureDOM.textContent="",degreeDOM.innerHTML="",unitsDOM.textContent="",descriptionDOM.textContent="Loading ...",searchInput.blur(),popUpValue.textContent="--",popUpUnits.textContent="",precipitation1DOM.textContent="--",precipitation2DOM.textContent="--",wind1DOM.textContent="--",wind2DOM.textContent="--",windSecondary1DOM.textContent="??",windSecondary2DOM.textContent="??",pressure1DOM.textContent="--",pressure2DOM.textContent="--",humidityDOM.textContent="--",cloudDOM.textContent="--",uvDOM.textContent="--"},changeBackgroundColor=(e,t)=>{weatherPrimary.style.background=`linear-gradient(${e}, ${t})`,weatherSecondary.style.background=`linear-gradient(${t}, ${e}) `,headerShadow.style.background=`linear-gradient(to top, ${e} 70%, transparent)`,screen.width<1200&&(headerShadow.style.background=`linear-gradient(to top, ${e} 80%, transparent)`),footerShadow.style.background=`linear-gradient(${e}, #000)`},getEmoji=e=>{icon.style.display="inline-block",headerOverlayColors.forEach(e=>header.classList.remove(e)),e>45?(icon.src="./assets/images/hot.gif",header.classList.add("header--red"),changeBackgroundColor("#bd4f6c","#fc575e")):e>30?(icon.src="./assets/images/sunglass.gif",header.classList.add("header--orange"),changeBackgroundColor("#f9484a","#fbd72b")):e>20?(icon.src="./assets/images/blessed.gif",header.classList.add("header--green"),changeBackgroundColor("#28b485","#7ed56f")):e>10?(icon.src="./assets/images/sleep.gif",header.classList.add("header--pink"),changeBackgroundColor("#ff748b","#fe7bb0")):(icon.src="./assets/images/cold.gif",header.classList.add("header--blue"),changeBackgroundColor("#2a2a72","#009ffd"))},updateUI=e=>{const{temp_c:t,temp_f:n,condition:{text:r},feelslike_c:o,feelslike_f:a,precip_mm:i,precip_in:u,wind_kph:c,wind_mph:s,wind_dir:d,wind_degree:l,pressure_mb:p,pressure_in:h,humidity:m,cloud:C,uv:y}=e.current,{tz_id:M,name:O,region:g,country:D}=e.location;temperatureCelsius=t,temperatureFahrenheit=n,temperatureFeelsLikeCelsius=o,temperatureFeelsLikeFahrenheit=a,timeZoneDOM.textContent=`${M.split("/")[0]} / ${M.split("/")[1]}`,areaDOM.textContent=`${O}, ${g}`,countryDOM.textContent=D,getEmoji(t),"celsius"===unitsDOM.getAttribute("data-units")?(temperatureDOM.textContent=temperatureCelsius,unitsDOM.textContent="C",popUpValue.textContent=temperatureFeelsLikeCelsius,popUpUnits.textContent="C"):"fahrenheit"===unitsDOM.getAttribute("data-units")&&(temperatureDOM.textContent=temperatureFahrenheit,unitsDOM.textContent="F",popUpValue.textContent=temperatureFeelsLikeFahrenheit,popUpUnits.textContent="F"),degreeDOM.innerHTML="&deg;",descriptionDOM.textContent=r,searchInput.value="",precipitation1DOM.textContent=i,precipitation2DOM.textContent=u,wind1DOM.textContent=c,wind2DOM.textContent=s,windSecondary1DOM.textContent=d,windSecondary2DOM.textContent=l,pressure1DOM.textContent=p,pressure2DOM.textContent=h,humidityDOM.textContent=m,cloudDOM.textContent=C,uvDOM.textContent=y},changeTemperatureUnits=()=>{"celsius"===unitsDOM.getAttribute("data-units")?(unitsDOM.setAttribute("data-units","fahrenheit"),temperatureDOM.textContent=temperatureFahrenheit,unitsDOM.textContent="F",popUpValue.textContent=temperatureFeelsLikeFahrenheit,popUpUnits.textContent="F"):"fahrenheit"===unitsDOM.getAttribute("data-units")&&(unitsDOM.setAttribute("data-units","celsius"),temperatureDOM.textContent=temperatureCelsius,unitsDOM.textContent="C",popUpValue.textContent=temperatureFeelsLikeCelsius,popUpUnits.textContent="C")},apiKey="8ab0cd3f17d54511bde60005210203",getWeatherWithLocation=()=>{const e=searchInput.value,t=`http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${e}`;fetch(t).then(e=>e.json()).then(e=>{updateUI(e),errorGlobal=!1}).catch(t=>{icon.style.display="none",descriptionDOM.innerHTML=`<b>${e[0].toUpperCase()+e.slice(1)}</b> not found.`,errorGlobal=!0})},geolocation=()=>{navigator.geolocation.getCurrentPosition(e=>{const t=e.coords,n=t.latitude,r=t.longitude,o=`http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${n},${r}`;fetch(o).then(e=>e.json()).then(e=>{updateUI(e),errorGlobal=!1}).catch(e=>{icon.style.display="none",errorGlobal=!0})},e=>{icon.style.display="none",errorGlobal=!0,1===e.code?descriptionDOM.innerHTML="Allow <b>Climato</b> to access this device location.":2===e.code&&(descriptionDOM.innerHTML="<b>Climato</b> needs internet access.")})};window.addEventListener("load",()=>{loadingUI(),geolocation()}),gprsButton.addEventListener("click",()=>{loadingUI(),geolocation()}),searchButton.addEventListener("click",()=>{loadingUI(),getWeatherWithLocation()}),window.addEventListener("keydown",e=>{"Enter"===e.key&&(loadingUI(),getWeatherWithLocation())}),temperatureContainerDOM.addEventListener("click",()=>{errorGlobal||("celsius"===unitsDOM.getAttribute("data-units")?(unitsDOM.setAttribute("data-units","fahrenheit"),temperatureDOM.textContent=temperatureFahrenheit,unitsDOM.textContent="F",popUpValue.textContent=temperatureFeelsLikeFahrenheit,popUpUnits.textContent="F"):"fahrenheit"===unitsDOM.getAttribute("data-units")&&(unitsDOM.setAttribute("data-units","celsius"),temperatureDOM.textContent=temperatureCelsius,unitsDOM.textContent="C",popUpValue.textContent=temperatureFeelsLikeCelsius,popUpUnits.textContent="C"))}),temperatureContainerDOM.addEventListener("mouseenter",()=>{errorGlobal||popUp.classList.add("pop-up--active")}),temperatureContainerDOM.addEventListener("mouseleave",()=>{setTimeout(()=>{popUp.classList.remove("pop-up--active")},200)});